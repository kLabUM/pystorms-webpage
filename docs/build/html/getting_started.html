
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>pystorms &#8212; pystorms 1.0.0 documentation</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Scenarios" href="scenarios.html" />
    <link rel="prev" title="&lt;no title&gt;" href="index.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    
<a class="navbar-brand" href="index.html">
<p class="title">pystorms</p>
</a>

    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 current active nav-item">
 <a class="current reference internal nav-link" href="#">
  <code class="docutils literal notranslate">
   <span class="pre">
    pystorms
   </span>
  </code>
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="scenarios.html">
  Scenarios
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="building_scenarios.html">
  Building Custom Scenarios
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="advanced.html">
  Advanced
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="contributing.html">
  Contributing
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/kLabUM/pystorms" rel="noopener" target="_blank" title="GitHub"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://pypi.org/project/pystorms/" rel="noopener" target="_blank" title="PyPI"><span><i class="fas fa-box"></i></span>
            <label class="sr-only">PyPI</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar">
              <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    
  </div>
</nav>
              </div>
              <div class="sidebar-end-items">
              </div>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage mt-5 pt-1 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#installation">
   Installation
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#getting-started">
   Getting Started
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#background">
   Background
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#citation">
   Citation
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#license">
   License
  </a>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <section id="pystorms">
<h1><code class="docutils literal notranslate"><span class="pre">pystorms</span></code><a class="headerlink" href="#pystorms" title="Permalink to this headline">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">pystorms</span></code> is created to aid in the evaluation and development of algorithms for the control of storm water networks.
It is an open-source Python library that enables the quick evaluation of control strategies on real world-inspired smart storm water networks.</p>
<p><code class="docutils literal notranslate"><span class="pre">pystorms</span></code> provides users with,</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>A collection of real-world inspired stormwater networks (see Scenarios).</p></li>
<li><p>A streamlined programming interface to analyze performance of control algorithms on the included networks (see Environment).</p></li>
</ol>
</div></blockquote>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">#</a></h2>
<p>This package is built in python 3+ and is supported on all operating systems (Windows, Mac OS, Linux).</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install pystorms
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">pystorms</span></code> dependencies:</p>
<ul class="simple">
<li><p>PyYAML 5.1+</p></li>
<li><p>python 3+</p></li>
<li><p>numpy</p></li>
<li><p>pyswmm</p></li>
</ul>
<p>If you run into any issues installing the package, please refer to the advanced section for additional installation instructions or feel free to contact us.</p>
</section>
<section id="getting-started">
<h2>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">#</a></h2>
<p>All necessary dependencies for the <code class="docutils literal notranslate"><span class="pre">pystorms</span></code> package should be installed via the <code class="docutils literal notranslate"><span class="pre">pip</span></code> package installer. To ensure <code class="docutils literal notranslate"><span class="pre">pystorms</span></code> has been installed successfully–while also providing the basics for use of <code class="docutils literal notranslate"><span class="pre">pystorms</span></code>–, the following code snippet can be run, with details of its components provided below.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pystorms</span>

<span class="c1"># (3) Define the control algorithm</span>
<span class="k">def</span> <span class="nf">controller</span><span class="p">(</span><span class="n">state</span><span class="p">):</span>
     <span class="n">actions</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
     <span class="k">if</span> <span class="n">state</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">0.5</span><span class="p">:</span>
             <span class="n">actions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.5</span>
     <span class="k">if</span> <span class="n">state</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">0.5</span><span class="p">:</span>
             <span class="n">actions</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.5</span>
     <span class="k">return</span> <span class="n">actions</span>

<span class="c1"># (1) Call and define the scenario</span>
<span class="n">env</span> <span class="o">=</span> <span class="n">pystorms</span><span class="o">.</span><span class="n">scenarios</span><span class="o">.</span><span class="n">theta</span><span class="p">()</span>

<span class="c1"># (2) Run the simulation</span>
<span class="n">done</span> <span class="o">=</span> <span class="kc">False</span>
<span class="k">while</span> <span class="ow">not</span> <span class="n">done</span><span class="p">:</span>
    <span class="n">state</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">state</span><span class="p">()</span>
    <span class="n">actions</span> <span class="o">=</span> <span class="n">controller</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
    <span class="n">done</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>
</pre></div>
</div>
<p>We break the above code snippet into three parts:</p>
<ol class="arabic simple">
<li><p>Define a scenario</p></li>
</ol>
<p>To run a stormwater control simulation using <code class="docutils literal notranslate"><span class="pre">pystorms</span></code>, a <strong>scenario</strong> must first be defined. <strong>Scenarios are the fundamental components of the pystorms library</strong>, and each consist of (i) a stormwater network, (ii) a driving precipitation event, and (iii) a control objective.</p>
<p>As seen in the code above, a scenario is called by defining a class (e.g. <code class="code docutils literal notranslate"><span class="pre">env</span></code>) that initializes the default simulation modules specific for the corresponding scenario. In the code above, the corresponding scenario is <em>theta</em>, which is a basic stormwater control scenario developed specifically for testing and debugging of new code and/or control algorithms in <code class="code docutils literal notranslate"><span class="pre">pystorms</span></code>.</p>
<p>For the example above, the scenario class is defined using the default precipitation event and control objective of the theta scenario; it is defined fully by the following line of code: <code class="code docutils literal notranslate"><span class="pre">env</span> <span class="pre">=</span> <span class="pre">pystorms.scenarios.theta()</span></code>).</p>
<ol class="arabic simple" start="2">
<li><p>Delineate a simulation</p></li>
</ol>
<p>A <strong>simulation</strong> for the scenario is then delineated using the method calls of the scenario class (i.e. <code class="code docutils literal notranslate"><span class="pre">env</span></code> in this example). For <code class="docutils literal notranslate"><span class="pre">pystorms</span></code> the method calls of the scenario class were defined to follow the typical actions that occur in-situ for <em>actual</em> control systems. Namely, there are two specific components: (i) querying the state of the system, and (ii) implementing control actions based on the system’s state.</p>
<ol class="lowerroman simple">
<li><p>States in the stormwater network (e.g. water levels, flows, pollutant concentrations) can be queried at any point of the simulation using the <code class="code docutils literal notranslate"><span class="pre">env.state()</span></code> method.</p></li>
<li><p>Control actions can be implemented in the network, and the simulation can be progressed forward for a specified time-step using the <code class="code docutils literal notranslate"><span class="pre">env.step(&lt;your</span> <span class="pre">actions</span> <span class="pre">here&gt;)</span></code> call. Please refer to the scenarios section for more information.</p></li>
</ol>
<ol class="arabic simple" start="3">
<li><p>Implementing the control algorithm</p></li>
</ol>
<p>The simulation set up in this way eases the ability to explicitly segregate the <strong>control algorithm</strong> that determines what control actions are to be implemented. By separating out the control algorithm in this way, the user is able to focus on testing various control strategies and their computational implementation via their algorithms.</p>
<p>As can be seen by the case provided here, the control algorithm is such that all settings corresponding to the control assets are set to <code class="docutils literal notranslate"><span class="pre">1.0</span></code> (the proportional equivalent of <code class="docutils literal notranslate"><span class="pre">100%</span></code>). If the states at either of the state locations read greater than <code class="docutils literal notranslate"><span class="pre">0.5</span></code>, then the corresponding control asset setting is changed to <code class="docutils literal notranslate"><span class="pre">0.5</span></code>. (The details of what physical parameters the state and control setting values correspond to are discussed in the Scenario Theta section).</p>
<p>We refer to the case when no control is implemented as the <strong>uncontrolled case</strong>. To run the uncontrolled case, simply progress the simulation without defining any actions in the step call (i.e. <code class="code docutils literal notranslate"><span class="pre">env.step()</span></code>).</p>
</section>
<section id="background">
<h2>Background<a class="headerlink" href="#background" title="Permalink to this headline">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">pystorms</span></code> is built on <a class="reference external" href="https://github.com/OpenWaterAnalytics/pyswmm">pyswmm</a>, which is a Python wrapper developed to interface with the United State’s Environmental Protection Agency Storm Water Management Model <a class="reference external" href="https://www.epa.gov/water-research/storm-water-management-model-swmm">EPA-SWMM</a>, thus allowing users to bypass the need for utilizing the EPA-SWMM GUI (available only on Windows operating systems) or compiling the EPA-SWMM source code for usage.</p>
<p><code class="docutils literal notranslate"><span class="pre">pystorms</span></code> is developed by Open-Storm, the open-source outreach efforts of a consortium of university researchers, industry experts, and municipal practitioners, and lead by the <a class="reference external" href="http://www-personal.umich.edu/~bkerkez/">Real-Time Water Systems Lab</a> at the University of Michigan.</p>
</section>
<section id="citation">
<h2>Citation<a class="headerlink" href="#citation" title="Permalink to this headline">#</a></h2>
<div class="highlight-latex notranslate"><div class="highlight"><pre><span></span>@article<span class="nb">{</span>rimer2021pystorms,
  title=<span class="nb">{</span>pystorms: A simulation sandbox for the development and evaluation of stormwater control algorithms<span class="nb">}</span>,
  author=<span class="nb">{</span>Rimer, Sara P and Mullapudi, Abhiram and Troutman, Sara C and Ewing, Gregory and Bowes, Benjamin D and Akin, Aaron A and Sadler, Jeffrey and Kertesz, Ruben and McDonnell, Bryant and Montestruque, Luis and others<span class="nb">}</span>,
  journal=<span class="nb">{</span>arXiv preprint arXiv:2110.12289<span class="nb">}</span>,
  year=<span class="nb">{</span>2021<span class="nb">}</span>
<span class="nb">}</span>
</pre></div>
</div>
</section>
<section id="license">
<h2>License<a class="headerlink" href="#license" title="Permalink to this headline">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">pystorms</span></code> is licensed under a GNU General Public License (v3).</p>
<p><a class="reference external" href="https://tldrlegal.com/license/gnu-general-public-license-v3-(gpl-3)">Quick Summary of GNU v3</a>: <em>You may copy, distribute and modify the software as long as you track changes/dates in source files. Any modifications to or software including (via compiler) GPL-licensed code must also be made available under the GPL along with build &amp; install instructions.</em></p>
</section>
</section>


              </div>
              
              
              <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="index.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">&lt;no title&gt;</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="scenarios.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Scenarios</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
              
          </main>
          

      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>
<footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2022.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.4.0.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>